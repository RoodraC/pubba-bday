<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mission Control â€” Dad's Birthday</title>
  <style>
    :root{
      --bg:#071023; --panel:#0d1b2a; --accent:#1de9b6; --accent2:#40c4ff; --warm:#ffb74d;
      --text:#cfe8ff;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{
      height:100%;margin:0;
      background:radial-gradient(1200px 600px at 10% 10%, rgba(4,8,15,0.7), transparent), var(--bg);
      color:var(--text);
      transition: background 0.8s ease, color 0.6s ease;
    }
    .wrap{display:grid;grid-template-columns:1fr 420px;gap:28px;padding:28px;min-height:100vh;align-items:start}
    header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
    .logo{display:flex;flex-direction:column;gap:2px}
    h1{margin:0;font-size:20px;letter-spacing:0.6px}
    p.lead{margin:0;color:#9fb7d6;font-size:13px}

    /* Left main panel */
    .stage{position:relative;border-radius:14px;padding:24px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));box-shadow:0 6px 30px rgba(2,6,23,0.6);overflow:hidden;transition:background 0.6s ease,color 0.6s ease}
    #particles, #fireworks, #equations{position:absolute;inset:0;pointer-events:none}
    .center-card{position:relative;z-index:4;display:flex;flex-direction:column;gap:12px;align-items:flex-start}

    .panel-title{display:flex;align-items:center;gap:10px}
    .chip{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;font-weight:600;font-size:13px}

    /* Info box style (replaces the black rectangle) */
    .info-box{
      background: rgba(0,0,0,0.72);
      border-radius: 12px;
      padding: 16px;
      color: #bfe6ff;
      max-width: 820px;
      box-shadow: 0 8px 40px rgba(2,6,23,0.6);
    }
    .info-box h3{color:#7fffd4;margin:0 0 6px 0;font-size:16px}
    .info-box p{margin:0;color:#a7d6f0}
    .badges{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    .badge{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;color:#d6eeff}
    .robot-square{width:72px;height:72px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;font-size:34px;margin-top:12px}

    /* Right control console */
    .console{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:inset 0 -6px 40px rgba(0,0,0,0.35);transition:background 0.6s ease,color 0.6s ease}
    .controls{display:flex;flex-direction:column;gap:12px}
    button.btn{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:10px;color:var(--accent);font-weight:700;cursor:pointer}
    button.btn.secondary{color:var(--accent2)}
    button.btn:active{transform:translateY(1px)}
    label.small{display:flex;gap:8px;align-items:center;color:#9fb7d6;font-size:13px}
    .tiny-input{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:rgba(0,0,0,0.3);color:var(--text);outline:none}
    .submit-row{display:flex;gap:8px;align-items:center}

    footer{grid-column:1/-1;text-align:center;color:#7f9fbf;margin-top:8px;font-size:13px}

    /* Cake modal */
    .cake{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(0.9);background:linear-gradient(180deg,#fff 10%, #fff8e8 100%);color:#071023;padding:20px;border-radius:14px;box-shadow:0 30px 80px rgba(0,0,0,0.6);z-index:999;transition:all .28s cubic-bezier(.2,.9,.3,1);display:none}
    .cake.show{display:block;transform:translate(-50%,-50%) scale(1)}
    .cake h2{margin:0 0 8px 0}
    .cake .candles{display:flex;gap:6px;margin-top:12px}
    .cake .candle{width:8px;height:20px;background:linear-gradient(#ff8a65,#ff3d00);border-radius:4px}

    /* confetti */
    canvas.confetti{position:fixed;left:0;top:0;pointer-events:none;z-index:1000}

    /* responsive */
    @media (max-width:900px){.wrap{grid-template-columns:1fr;padding:16px}.console{order:2}}

    /* Party Mode (whole UI) */
    body.party-mode{
      /* big colorful party background */
      background: linear-gradient(135deg, #ff6b6b, #ffd166, #9ae66b, #4dd6ff);
      background-size: 300% 300%;
      animation: partyBg 8s linear infinite;
      color: #071023;
    }
    body.party-mode .stage{background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));}
    body.party-mode .console, body.party-mode .info-box{background: rgba(255,255,255,0.94); color:#071023}
    body.party-mode .badge{background:rgba(0,0,0,0.06); color:#071023}
    body.party-mode button.btn{background:linear-gradient(180deg,#071023,#0b2540); color:#fff}
    @keyframes partyBg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <h1>Happy Birthday to Daddy The Great!</h1>
        <p class="lead">Made with infinite love.</p>
      </div>
      <div style="margin-left:auto;display:flex;gap:12px;align-items:center">
        <div class="chip">Age: <strong id="ageChip">47</strong></div>
        <div class="chip" style="font-weight:700">Ï€ â‰ˆ 3.14159</div>
      </div>
    </header>

    <main class="stage" id="stage">
      <canvas id="particles"></canvas>
      <canvas id="fireworks"></canvas>
      <canvas id="equations"></canvas>
      <canvas id="bubbles" style="position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none"></canvas>


      <div class="info-box" style="position:relative;z-index:4">
        <h3>Happy Birthday Daddy!</h3>
        <p>Dear pubba, Happy Birthday! I love you so much.... Honestly, I don't know what to write, you're my dad! All I can tell you (which u already know) is that we will always be there for you, you are an amazing dad and I am so happy I have a dad like you!</p>

        <div class="badges" aria-hidden="true">
          <span class="badge">#Cool</span>
          <span class="badge">#Pubba</span>
          <span class="badge">#Techno</span>
          <span class="badge">#HAPPY47</span>
        </div>

        <div style="display:flex;gap:14px;margin-top:12px;align-items:center">
          <div class="robot-square" aria-hidden="true">ðŸ¤–</div>
          <div style="color:#9fb7d6">Try pressing the buttons and witness the marvelous talent of betu the great!</div>
        </div>
      </div>
    </main>

    <aside class="console" role="region" aria-label="Console">
      <h3 style="margin:0 0 8px 0">Console</h3>
      <div class="controls">
        <button class="btn" id="btnCake">Launch Cake Drone</button>
        <button class="btn secondary" id="btnParty">Activate Party Mode</button>
        <button class="btn" id="btnFire">Firework Simulation</button>
        <button class="btn secondary" id="btnPlay">Play Birthday Anthem</button>

        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <label class="small"><input type="checkbox" id="autoConf" checked /> Auto-confetti</label>
          <div style="font-size:12px;color:inherit;opacity:0.85">Tip: use the console to surprise him.</div>
        </div>

        <!-- Tiny typing bar + Submit button -->
        <div class="submit-row" style="margin-top:4px">
          <input id="secretInput" class="tiny-input" placeholder="Enter access code..." aria-label="Access code" />
          <button id="secretSubmit" class="btn">Submit</button>
        </div>
      </div>
    </aside>

    <div class="cake" id="cakeModal" role="dialog" aria-hidden="true">
      <h2>ðŸŽ‚ Surprise!</h2>
      <div>Happy <span id="ageText">47</span>th Birthday, Captain!</div>
      <div class="candles" id="candles"></div>
    </div>

    <footer>Tip: Have Fun!</footer>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>

  <script>
  // ---------- utility: fit canvas for DPR ----------
  function fitCanvas(c){
    c.width = c.clientWidth * devicePixelRatio;
    c.height = c.clientHeight * devicePixelRatio;
    const ctx = c.getContext('2d');
    ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    return ctx;
  }
  // ---------- Full-page colorful bouncing bubbles ----------
(function(){
  const c = document.getElementById('bubbles');
  const ctx = fitCanvas(c);

  let w = c.width / devicePixelRatio;
  let h = c.height / devicePixelRatio;

  function resize(){
    fitCanvas(c);
    w = c.width / devicePixelRatio;
    h = c.height / devicePixelRatio;
  }
  window.addEventListener('resize', resize);

  const COUNT = 47;
  const colors = ['#ff8a80','#ffd180','#ffff8d','#b9f6ca','#80deea','#b388ff'];
  const bubbles = Array.from({length: COUNT}, () => {
    const r = 4 + Math.random() * 10;
    return {
      x: Math.random() * (w - 2*r) + r,
      y: Math.random() * (h - 2*r) + r,
      vx: (Math.random() - 0.5) * 1.4,
      vy: (Math.random() - 0.5) * 1.0,
      r,
      col: colors[Math.floor(Math.random() * colors.length)],
      wobble: Math.random() * Math.PI * 2,
      wobbleSpeed: 0.005 + Math.random() * 0.012
    };
  });

  function loop(){
    ctx.clearRect(0,0,w,h);
    for(let b of bubbles){
      b.wobble += b.wobbleSpeed;
      b.x += b.vx + Math.sin(b.wobble) * 0.15;
      b.y += b.vy + Math.cos(b.wobble) * 0.12;

      if(b.x - b.r < 0){ b.x = b.r; b.vx *= -1; }
      if(b.x + b.r > w){ b.x = w - b.r; b.vx *= -1; }
      if(b.y - b.r < 0){ b.y = b.r; b.vy *= -1; }
      if(b.y + b.r > h){ b.y = h - b.r; b.vy *= -1; }

      ctx.beginPath();
      const g = ctx.createRadialGradient(b.x, b.y, b.r*0.2, b.x, b.y, b.r*1.8);
      g.addColorStop(0, b.col);
      g.addColorStop(1, 'rgba(255,255,255,0.02)');
      ctx.fillStyle = g;
      ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
      ctx.fill();

      ctx.beginPath();
      ctx.fillStyle = 'rgba(255,255,255,0.6)';
      ctx.arc(b.x - b.r*0.35, b.y - b.r*0.35, Math.max(0.9, b.r*0.35), 0, Math.PI*2);
      ctx.fill();
    }
    requestAnimationFrame(loop);
  }

  setTimeout(() => { resize(); loop(); }, 60);
})();


  // ---------- Particles (stars) ----------
  (function(){
    const c = document.getElementById('particles');
    c.style.width = '100%'; c.style.height = '100%';
    const ctx = fitCanvas(c);
    let w = c.width/devicePixelRatio, h = c.height/devicePixelRatio;
    let stars = Array.from({length:80}, ()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.8+0.2, vx:(Math.random()-0.5)*0.2, vy:(Math.random()-0.5)*0.15, a:Math.random()*0.9+0.1}));

    function resize(){ fitCanvas(c); w=c.width/devicePixelRatio; h=c.height/devicePixelRatio; }
    window.addEventListener('resize', resize);

    function loop(){
      ctx.clearRect(0,0,w,h);
      for(let s of stars){
        s.x += s.vx; s.y += s.vy; s.a += Math.sin(Date.now()/1000 + s.r)/250;
        if(s.x< -10) s.x=w+10; if(s.x>w+10) s.x=-10; if(s.y< -10) s.y=h+10; if(s.y>h+10) s.y=-10;
        ctx.beginPath(); ctx.globalAlpha = 0.6 * s.a; ctx.fillStyle = '#7fffd4'; ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
      }
      requestAnimationFrame(loop);
    }
    loop();
  })();

  // ---------- Floating equations ----------
  (function(){
    const c = document.getElementById('equations'); c.style.width='100%'; c.style.height='100%';
    const ctx = fitCanvas(c);
    let w=c.width/devicePixelRatio, h=c.height/devicePixelRatio;
    function resize(){ fitCanvas(c); w=c.width/devicePixelRatio; h=c.height/devicePixelRatio; }
    window.addEventListener('resize', resize);

    let items = [];
    const eqs = ['e^{iÏ€}+1=0','âˆ«_0^Ï€ sin x dx = 2','F = ma','E = mcÂ²','âˆ‘ 1/nÂ² = Ï€Â²/6','âˆš2','âˆ‡Â·E = 0','India ðŸ‡®ðŸ‡³'];
    function spawn(){ items.push({text:eqs[Math.floor(Math.random()*eqs.length)],x:Math.random()*(w-120)+20,y:h+20,vy:-(0.2+Math.random()*0.6),alpha:0}); }
    setInterval(spawn,900);

    function draw(){ ctx.clearRect(0,0,w,h); ctx.font='14px system-ui, sans-serif'; ctx.fillStyle='rgba(160,220,255,0.95)';
      for(let it of items){ it.y += it.vy; it.alpha = Math.min(1, it.alpha + 0.01); ctx.globalAlpha = it.alpha; ctx.fillText(it.text, it.x, it.y); }
      items = items.filter(i => i.y > -40); requestAnimationFrame(draw);
    }
    draw();
  })();

  // ---------- Confetti ----------
  (function(){
    const c = document.getElementById('confettiCanvas'); c.style.width='100%'; c.style.height='100%';
    const ctx = fitCanvas(c);
    let pieces = [];
    function resize(){ fitCanvas(c); }
    window.addEventListener('resize', resize);

    function addBurst(x,y,count=80){
      for(let i=0;i<count;i++){
        pieces.push({
          x,y,
          vx:(Math.random()-0.5)*8,
          vy:(Math.random()-2)*8,
          size:4+Math.random()*8,
          rot:Math.random()*360,
          vr:Math.random()*10,
          life:100,
          color: ['#ffcc80','#ffd54f','#ff8a65','#80d8ff','#a7ffeb'][Math.floor(Math.random()*5)]
        });
      }
    }

    function loop(){
      ctx.clearRect(0,0,c.width/devicePixelRatio,c.height/devicePixelRatio);
      for(let p of pieces){
        p.x+=p.vx; p.y+=p.vy; p.vy += 0.25; p.rot += p.vr; p.life--;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180); ctx.fillStyle=p.color;
        ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size); ctx.restore();
      }
      pieces = pieces.filter(p=>p.life>0);
      requestAnimationFrame(loop);
    }
    loop();
    window.__confetti = { burst: addBurst };
  })();

  // ---------- Fireworks ----------
  (function(){
    const c = document.getElementById('fireworks'); c.style.width='100%'; c.style.height='100%';
    const ctx = fitCanvas(c);
    let rockets = [], sparks = [];

    function launch(x,y){
      rockets.push({x:Math.random()*window.innerWidth*0.6+window.innerWidth*0.2,y:window.innerHeight+10,tx:x,ty:y,vx:(Math.random()-0.5)*6,vy:-7,life:100});
    }

    function explode(x,y){
      let colors=['#ff5252','#ffb74d','#69f0ae','#40c4ff','#b388ff'];
      let col=colors[Math.floor(Math.random()*colors.length)];
      for(let i=0;i<120;i++){
        let a=Math.random()*Math.PI*2; let s=Math.random()*5+1;
        sparks.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:Math.random()*60+30,color:col});
      }
    }

    function loop(){
      ctx.clearRect(0,0,c.width/devicePixelRatio,c.height/devicePixelRatio);
      for(let r of rockets){ r.x += r.vx; r.y += r.vy; r.vy += 0.12; ctx.beginPath(); ctx.fillStyle='#fff'; ctx.arc(r.x,r.y,2,0,Math.PI*2); ctx.fill(); if(r.vy> -1){ explode(r.x,r.y); r.dead=true;} }
      rockets = rockets.filter(r=>!r.dead);
      for(let s of sparks){ s.x+=s.vx; s.y+=s.vy; s.vy += 0.05; s.life--; ctx.beginPath(); ctx.fillStyle = s.color; ctx.globalAlpha = Math.max(0, s.life/80); ctx.arc(s.x,s.y,2.2,0,Math.PI*2); ctx.fill(); }
      sparks = sparks.filter(s=>s.life>0);
      requestAnimationFrame(loop);
    }
    loop();

    window.__fireworks = { burstAt: (x,y)=> { for(let i=0;i<6;i++){ setTimeout(()=>launch(x+Math.random()*200-100, y - Math.random()*200), i*120); } } };
  })();

  // ---------- Cake Modal ----------
  const cakeModal = document.getElementById('cakeModal');
  const ageText = document.getElementById('ageText');
  const ageChip = document.getElementById('ageChip');
  (function(){
    // if ?age= passed in url, reflect it
    const p = new URLSearchParams(location.search);
    if(p.get('age')){ ageChip.textContent = p.get('age'); ageText.textContent = p.get('age'); }
  })();

  document.getElementById('btnCake').addEventListener('click', ()=>{
    cakeModal.classList.add('show');
    const c = document.getElementById('candles'); c.innerHTML=''; for(let i=0;i<7;i++){ let d = document.createElement('div'); d.className='candle'; d.style.height = `${12 + Math.random()*22}px`; c.appendChild(d);}
    if(document.getElementById('autoConf').checked) window.__confetti.burst(window.innerWidth/2, window.innerHeight/2, 120);
    new Audio('happy_birthday_message.mp3').play();
    setTimeout(()=>{ cakeModal.classList.remove('show'); },5500);
  });

  // ---------- Party Mode (whole UI) ----------
  let partyActive = false;
  document.getElementById('btnParty').addEventListener('click', ()=>{
    partyActive = !partyActive;
    if(partyActive){
      document.body.classList.add('party-mode');
      document.getElementById('btnParty').textContent = 'Deactivate Party Mode';
      // optional starter burst
      if(document.getElementById('autoConf').checked) window.__confetti.burst(window.innerWidth/2, 120, 120);
    } else {
      document.body.classList.remove('party-mode');
      document.getElementById('btnParty').textContent = 'Activate Party Mode';
    }
  });

  // ---------- Fireworks / Play / Confetti ----------
  document.getElementById('btnFire').addEventListener('click', ()=>{
    for(let i=0;i<6;i++){ setTimeout(()=>window.__fireworks.burstAt(Math.random()*window.innerWidth, Math.random()*window.innerHeight*0.7+50), i*250); }
    if(document.getElementById('autoConf').checked) setTimeout(()=>window.__confetti.burst(window.innerWidth/2,window.innerHeight/2,140),600);
  });

  document.getElementById('btnPlay').addEventListener('click', ()=>{
    new Audio('happy_birthday_messageee.mp3').play();
    playMelody();
    if(document.getElementById('autoConf').checked) window.__confetti.burst(window.innerWidth/2,window.innerHeight/2,80);
  });

  function speak(txt){
    if('speechSynthesis' in window){
      let u = new SpeechSynthesisUtterance(txt);
      u.lang='en-US'; u.pitch = 0.95; u.rate = 1;
      speechSynthesis.speak(u);
    }
  }

  function playMelody(){
    try{
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const notes = [392,392,440,392,523,494,0,392,392,440,392,587,523];
      let t = ctx.currentTime + 0.06;
      for(let i=0;i<notes.length;i++){
        let n=notes[i];
        if(n>0){
          let o = ctx.createOscillator(); let g = ctx.createGain();
          o.connect(g); g.connect(ctx.destination); o.type='sine'; o.frequency.value = n;
          g.gain.value = 0.0001;
          o.start(t);
          g.gain.exponentialRampToValueAtTime(0.12, t+0.02);
          g.gain.exponentialRampToValueAtTime(0.0001, t+0.4);
          o.stop(t+0.45);
        }
        t += 0.45;
      }
    }catch(e){ console.warn('Audio failed', e); }
  }

  // ---------- Secret input (tiny typing bar + submit) ----------
  const secretInput = document.getElementById('secretInput');
  const secretSubmit = document.getElementById('secretSubmit');

  function runSecretAction(){
    const val = (secretInput.value || '').trim().toUpperCase();
    if(val === 'HAPPY47'){
  // celebration sequence:
  window.__confetti.burst(window.innerWidth/2, window.innerHeight/2, 220);
  for(let i=0;i<8;i++){
    setTimeout(()=>window.__fireworks.burstAt(window.innerWidth*(0.15+Math.random()*0.7), window.innerHeight*0.38), i*150);
  }

  // Play your recorded voice message
  new Audio('happy_birthday_messageeee.mp3').play();

  // Change the on-screen cake message
  ageText.textContent = ageChip.textContent; // still shows age
  cakeModal.querySelector('div').textContent = "ðŸŽ‰ Happy Birthday Daddy! I Love You! ðŸŽ‰";

  playMelody();

  // show cake for a moment
  cakeModal.classList.add('show');
  setTimeout(()=> cakeModal.classList.remove('show'), 5200);
  secretInput.value = '';
}

  }

  secretSubmit.addEventListener('click', runSecretAction);
  secretInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') runSecretAction(); });

  // ---------- Fit canvases on load/resize ----------
  setTimeout(()=>{ window.dispatchEvent(new Event('resize')); },200);
  window.addEventListener('resize', ()=>{ ['particles','fireworks','equations','confettiCanvas'].forEach(id=>{ const el = document.getElementById(id); if(el) fitCanvas(el); }) });

  // ensure canvases fit initially
  ['particles','fireworks','equations','confettiCanvas'].forEach(id=>{ const el = document.getElementById(id); if(el) fitCanvas(el); });

  </script>
</body>
</html>
